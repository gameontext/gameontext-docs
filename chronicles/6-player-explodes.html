<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link rel=stylesheet href=https://use.fontawesome.com/e3112f1bdf.css><link rel=stylesheet href=/css/flex.min.cb8b8d13f41f6429f128017210f5e73b9c0e95415c7315a71fca50bcb62b3580.css><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><title>GO: Breaking down the Player service</title><link rel=canonical href=/chronicles/6-player-explodes.html><link rel=alternate type=application/rss+xml href=/blog/index.xml title="Game On! Adventures with microservices"></head><body><header class=head-single><h1><a href=/>GAME<span class=on>ON</span></a></h1><div>Hands-on experiment building microservices and cloud native applications</div></header><nav class=project><a target=_blank href=https://gameontext.org title="Play the game"><i class="fa fa-play" aria-hidden=true></i><span>Play <span>the game</span></span></a>
<a href=/about/ title="Read the book"><i class="fa fa-book" aria-hidden=true></i><span>Learn <span>more</span></span></a>
<a href=/blog/ title="Read the blog"><i class="fa fa-newspaper-o" aria-hidden=true></i><span>Read <span>our blog</span></span></a>
<a target=_blank href=https://gameontext.org/slackin/ title="Join our slack team"><i class="fa fa-slack" aria-hidden=true></i><span><span>Join us on</span> Slack</span></a>
<a target=_blank class=github href=https://github.com/gameontext title="View project on GitHub"><i class="fa fa-github" aria-hidden=true></i><span>Github</span></a></nav><main class="book page"><article><header><h1>Breaking down the Player service</h1></header><p><img src=../images/Progression.006.jpeg alt=Progression width=95%></p><p>Over time, the Player service, which was filling multiple roles, felt more and
more out of place. It was already cut down once, when we moved the webapp out,
but as we resolved some websocket traffic management issues in the mediator,
it became clear that we had two very different work patterns within the same service,
one dealing only with CRUD operations, and one wielding data flowing over
long-running connections. The two workloads have fundamentally different behaviors and
scaling characteristics, and should not be housed in the same service.</p><p>So we exploded the formerly-known-as-Player-service into:</p><div class=ulist><ul><li>The (new) Player service (even if we keep the auth and player datastore together) is
REST-only, with short-lived operations with well understood load/scaling characteristics.</li><li>The Mediator service, which performs the task of mediating between long-running
WebSocket connections. The connection between the browser and the mediator is active
as long as the player is connected. The mediator then manages creating and destroying
connections to rooms (other services) as players move around. Scaling characteristics
here are harder to determine, as there are usually two long-running WebSocket connections
established for each active player.</li></ul></div><p>Breaking the two pieces apart wasn&#8217;t that difficult. The two pieces were built in
separate packages, and correctly treated internally as separate/isolated modules.
It was almost like we knew we would have to do this when we started&#8230;&#8203;</p></article><nav class=prev-next><div class=nav-left><div class=long><a href=/chronicles/5-swagger.html title="Previous: Show the API">Show the API</a></div><div class=short><a href=/chronicles/5-swagger.html title="Previous: Show the API">Previous</a></div></div><div class=nav-center><div class=long>Up: <a href=/chronicles/>Appendix: The Chronicles</a></div><div class=short><a href=/chronicles/>Up</a></div></div><div class=nav-right><div class=long><a href=/chronicles/7-etcd.html title="Next: Config management">Config management</a></div><div class=short><a href=/chronicles/7-etcd.html title="Next: Config management">Next</a></div></div></nav></main><footer class=foot><div id=copyrights>&#169; 2016-2020 under terms of the Apache License 2.0.</div><div>Follow us:
<a target=_blank href=https://twitter.com/gameontext title="Follow @gameontext"><i class="fa fa-twitter" aria-hidden=true></i></a></div></footer><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-90113653-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>