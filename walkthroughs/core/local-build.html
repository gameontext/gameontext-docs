<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link rel=stylesheet href=https://use.fontawesome.com/e3112f1bdf.css><link rel=stylesheet href=/css/flex.min.62d46290de4e8cb4b407a0a4c54711bb69af2f268ce654c5af64efa38732d394.css><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><title>GO: Working with Game On! Locally</title><link rel=canonical href=/walkthroughs/core/local-build.html><link rel=alternate type=application/rss+xml href=/blog/index.xml title="Game On! Adventures with microservices"></head><body><header class=head-single><h1><a href=/>GAME<span class=on>ON</span></a></h1><div>Hands-on experiment building microservices and cloud native applications</div></header><nav class=project><a target=_blank href=https://gameontext.org title="Play the game"><i class="fa fa-play" aria-hidden=true></i><span>Play <span>the game</span></span></a>
<a href=/about/ title="Read the book"><i class="fa fa-book" aria-hidden=true></i><span>Learn <span>more</span></span></a>
<a href=/blog/ title="Read the blog"><i class="fa fa-newspaper-o" aria-hidden=true></i><span>Read <span>our blog</span></span></a>
<a target=_blank href=https://gameontext.org/slackin/ title="Join our slack team"><i class="fa fa-slack" aria-hidden=true></i><span><span>Join us on</span> Slack</span></a>
<a target=_blank class=github href=https://github.com/gameontext title="View project on GitHub"><i class="fa fa-github" aria-hidden=true></i><span>Github</span></a></nav><main class="book page"><article><header><h1>Working with Game On! Locally</h1></header><p>Developing and testing your room locally in a production-like environment is an
important aspect of <a href=/about/twelve-factors.html>Twelve factor applications</a>, as it reduces the
likelihood that what you create locally will fail in new and unexpected ways
when activated in production.</p><p>Game On! is a containerized application that uses replaceable backing services
that can also run locally in containers (sometimes with minor substitutions,
as we&#8217;ll see). We like this for two reasons: 1) we can directly see what happens
when we prod things with a stick, and 2) we can be much more destructive with
local copies without worrying about messing something up.</p><section class="doc-section level-1"><h2 id=_using_vagrant>Using Vagrant</h2><p>The Vagrantfile defined in the <a href=https://github.com/gameontext/gameon>gameontext/gameon</a> (root) project will ensure that you&#8217;re
using the right versions of everything, regardless of which orchestration engine
you use, at the cost of getting one version right.</p><p>You need at least version 1.9.8 of Vagrant, which you can install using packages
from the <a href=https://www.vagrantup.com/downloads.html>Vagrant downloads page</a>.</p><p>Once you have Vagrant installed:</p><div class="olist arabic"><ol class=arabic><li>Use <code>vagrant up</code> to provision and launch the Vagrant VM.</li><li>Use <code>vagrant ssh</code> to create a command shell in the VM<ul><li><strong>All commands in the following sections are run in this shell</strong></li><li>You will start in the <code>/vagrant</code> directory<ul><li>This directory is 'shared'</li><li>It is the directory containing the Vagrantfile (the root <code>gameon</code> project)</li></ul></li></ul></li><li>When you&#8217;re done, use <code>vagrant down</code> to stop the VM.</li><li>Use <code>vagrant destroy</code> to tear down the VM completely.</li></ol></div></section><section class="doc-section level-1"><h2 id=_using_docker>Using Docker</h2><p><a href=https://docs.docker.com/engine/installation/>Installation instructions</a> for Docker vary by platform. On Windows and
macOS, you can also choose between Docker native and Docker Toolbox. Both should work.</p><p>We provide <a href=https://hub.docker.com/u/gameontext/>pre-built images on dockerhub</a> to simplify the steps
required to run the game locally.</p></section><section class="doc-section level-1"><h2 id=_container_orchestration>Container orchestration</h2><p>For sanity, you need help of some kind to manage starting and stopping images.
Even with the orchestrators, we still wrap invocations with shell scripts:
the scripts help ensure we all issue the same commands the same way every time.</p><div class=ulist><ul><li><a href=local-docker.html#rebuild>Using Docker Compose</a></li><li><a href=local-kubernetes.html#rebuild>Using Kubernetes</a></li></ul></div><aside class="admonition-block note" role=note><h6 class="block-title label-only"><span class=title-label>Note:</span></h6><p>The following sections apply to both Docker Compose and Kubernetes.
Use <code>./go-admin.sh choose</code> to toggle between them. The default value is <code>docker</code>
(to indicate Docker Compose).</p></aside></section><section class="doc-section level-1"><h2 id=_starting_game_services_locally_tldr>Starting game services locally (TL;DR)</h2><div class="olist arabic"><ol class=arabic><li>Obtain the source for the root project (<a href=https://github.com/gameontext/gameon>gameontext/gameon</a>)<ul><li>HTTPS: <code>git clone <a class=bare href=https://github.com/gameontext/gameon.git>https://github.com/gameontext/gameon.git</a></code></li><li>SSH: <code>git clone <a href=mailto:git@github.com>git@github.com</a>:gameontext/gameon.git</code></li></ul></li><li><p>Change to the gameon directory</p><div class=listing-block><pre>$ cd gameon</pre></div></li><li><p>Setup your environment (one time).</p><div class=listing-block><pre>$ ./go-admin.sh choose       # choose Docker Compose or Kubernetes
$ eval $(./go-admin.sh env)  # set aliases for admin scripts
$ alias go-run               # confirm `go-run.sh` script location</pre></div></li><li><p>Set up core game services:</p><div class=listing-block><pre>$ go-run setup</pre></div></li><li><p>Start core game services:</p><div class=listing-block><pre>$ go-run up</pre></div></li><li><strong>Carry on with <a href=/walkthroughs/advanced/>building your room</a> or other adventures</strong></li><li><p>Clean up</p><div class=listing-block><pre>$ go-run down</pre></div></li></ol></div></section><section class="doc-section level-1"><h2 id=_modifying_core_game_services>Modifying Core Game services</h2><p>If you change your mind, and decide you want to start hacking on a core game
service, no worries! You can mix and match the two approaches.</p><p>We use <a href=git.html>git submodules</a> to allow editing of core game services while
working with the <a href=https://github.com/gameontext/gameon>gameontext/gameon</a> (root) project to coordinate
deployment.</p><section class="admonition-block important" role=doc-notice><h6 class="block-title label-only"><span class=title-label>Important:</span></h6><p>When using <a href=git.html>git submodules</a>, please do not commit any changes to submodule
versions. Submodule versions are maintained by automated builds.</p></section><p>The following instructions assume you&#8217;ve cloned the root repository,
and are interested in editing the <code>map</code> service as an example:</p><div class="olist arabic"><ol class=arabic><li><p>Change to the gameon directory</p><div class=listing-block><pre>cd gameon</pre></div></li><li><p>Obtain the source for the project that you want to change.</p><div class=listing-block><pre>git submodule init map
git submodule update map</pre></div></li><li><p>Make your changes from within the child directory</p><div class=listing-block><pre>cd map
git checkout -b newbranch</pre></div><p>Then edit source or docker/image files using your favorite IDE.</p><aside class="admonition-block tip" role=doc-tip><h6 class="block-title label-only"><span class=title-label>Tip:</span></h6><p>If you plan to edit projects with Eclipse, run <code>./bin/eclipse.sh</code> to generate eclipse project files.</p></aside></li><li>Compile the source and rebuild docker image<ul><li><a href=local-docker.html#rebuild>Rebuild with Docker Compose</a></li><li>{using-kubernete}[Rebuild with Kubernetes]</li></ul></li><li><p>Push your changes to a new branch. From the map directory:</p><div class=listing-block><pre>git add -u
git commit -s</pre></div><aside class="admonition-block note" role=note><h6 class="block-title label-only"><span class=title-label>Note:</span></h6><p>Git commits must be <a href=https://github.com/gameontext/gameon/blob/master/CONTRIBUTING.md>signed</a></p></aside><p>Once you make your commit, if you go back to the root directory, you will see
a pending change for map. This indicates that the submodule is different than
the version from the current branch of the root project. <strong>Do not
check in this change.</strong> Sadly, these files can not be added to <code>.gitignore</code>.</p><p>Care must be taken to avoid staging these files if you otherwise end up making
changes to files in the root project itself.</p></li></ol></div></section><section class="doc-section level-1"><h2 id=_notes>Notes</h2><section class="doc-section level-2"><h3 id=_supporting_3rd_party_auth>Supporting 3rd party auth</h3><p>3rd party authentication (twitter, github, etc.) will not work locally, but the
anonymous/dummy user will. If you want to test with one of the 3rd party
authentication providers, you&#8217;ll need to
<a href=/walkthroughs/advanced/test-sso-login.html>set up your own tokens to do so.</a></p></section></section></article><nav class=prev-next><div class=nav-left><div class=long><a href=/walkthroughs/core/local-kubernetes.html title="Previous: Running with Kubernetes">Running with Kubernetes</a></div><div class=short><a href=/walkthroughs/core/local-kubernetes.html title="Previous: Running with Kubernetes">Previous</a></div></div><div class=nav-center><div class=long>Up: <a href=/walkthroughs/core/>Running core services locally</a></div><div class=short><a href=/walkthroughs/core/>Up</a></div></div><div class=nav-right><div class=long><a href=/chronicles/ title="Previous: Appendix: The Chronicles">Appendix: The Chronicles</a></div><div class=short><a href=/chronicles/ title="Previous: Appendix: The Chronicles">Previous</a></div></div></nav></main><footer class=foot><div id=copyrights>&#169; 2016-2020 under terms of the Apache License 2.0.</div><div>Follow us:
<a target=_blank href=https://twitter.com/gameontext title="Follow @gameontext"><i class="fa fa-twitter" aria-hidden=true></i></a></div></footer><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-90113653-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>