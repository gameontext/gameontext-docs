<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link rel=stylesheet href=https://use.fontawesome.com/e3112f1bdf.css><link rel=stylesheet href=/css/flex.min.0d2501d041d233e1f887af4ccf3fcfbfb60ff4276a16165c66500fe1a78f85da.css><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><title>GO: Eclipse and WDT</title><link rel=canonical href=/walkthroughs/eclipse-and-wdt.html><link rel=alternate type=application/rss+xml href=/blog/index.xml title="Game On! Adventures with microservices"></head><body><header class=head-single><h1><a href=/>GAME<span class=on>ON</span></a></h1><div>Hands-on experiment building microservices and cloud native applications</div></header><nav class=project><a target=_blank href=https://gameontext.org title="Play the game"><i class="fa fa-play" aria-hidden=true></i><span>Play <span>the game</span></span></a>
<a href=/about/ title="Read the book"><i class="fa fa-book" aria-hidden=true></i><span>Learn <span>more</span></span></a>
<a href=/blog/ title="Read the blog"><i class="fa fa-newspaper-o" aria-hidden=true></i><span>Read <span>our blog</span></span></a>
<a target=_blank href=https://gameontext.org/slackin/ title="Join our slack team"><i class="fa fa-slack" aria-hidden=true></i><span><span>Join us on</span> Slack</span></a>
<a target=_blank class=github href=https://github.com/gameontext title="View project on GitHub"><i class="fa fa-github" aria-hidden=true></i><span>Github</span></a></nav><main class="book page"><article><header><h1>Eclipse and WDT</h1></header><p>We are using Liberty as the server runtime and Eclipse as the IDE
with WebSphere development tools (WDT) to enable iterative development
with incremental publish. We are big fans of these tools because they&#8217;re very efficient: no build, repackage, or restart steps are required before your changes are live in the server.</p><p>Getting this setup to work with our Docker images does require some first-time set up, but after that, it&#8217;s smooth sailing for development.</p><p>This approach requires the mounted volumes provided by <code>docker-compose.override.yml</code>.</p><section class="doc-section level-1"><h2 id=_getting_eclipse_and_wdt>Getting Eclipse and WDT</h2><p>The easiest way to get both Eclipse and WDT is via <a href=https://developer.ibm.com/wasdev/downloads/liberty-profile-using-eclipse>wasdev.net</a>.</p><div class=ulist><ul><li>Step 1 contains the link for the latest Eclipse for Java EE developers</li><li>Step 2 contains a drag-and-drop link to install the latest copy of WDT.</li></ul></div></section><section class="doc-section level-1"><h2 id=_build_and_import_eclipse_projects>Build and import Eclipse projects</h2><p>Begin by building the eclipse projects in the submodules:</p><div class=listing-block><pre>./eclipse.sh</pre></div><p>Fire up eclipse, and use <strong>File</strong> &#8594; <strong>Import</strong>, and in the resulting dialog, start typing the word <code>Existing</code> and select <strong>Existing Projects into Workspace</strong> as soon as it appears.</p><p>Select the <code>gameon</code> directory created by the git clone operation.
Tick the <strong>Search for nested projects</strong> box and press <strong>Finish</strong>.</p><p>This should result in a collection of projects being imported to the workspace as shown in <a href=#projectImport>Figure 1</a>.</p><figure class=image-block id=projectImport><img src=/images/projectImport.png alt="Eclipse projects" width=350><figcaption>Figure 1. Example of the projects created by the import action</figcaption></figure></section><section class="doc-section level-1"><h2 id=_integration_with_liberty_and_wdt>Integration with Liberty and WDT</h2><p>For the full 'run in eclipse' support we need to have eclipse believe that our applications are being deployed to servers it manages. On it&#8217;s own, Liberty will monitor applications and server configuration files for changes, and will push configuration updates and/or re-start applications as necessary.</p><p>Full integration with WDT does bring some additional benefits, but there is currently a disconnect between how WDT would control a server in a docker container (as a remote server) when the file system is local to the host and no file transfer is required.</p><p>So, until we get that sorted, we&#8217;ll do the following:</p><div class="olist arabic"><ol class=arabic><li><a href=https://developer.ibm.com/wasdev/downloads/liberty-profile-using-non-eclipse-environments/>Download Liberty from wasdev.net</a>, and extract it to a well-known but nearby location. This copy will be used for compilation, rather than for running the application.</li><li>Use the <code>installUtility</code> command to update the installation to include the features our servers need. The <code>liberty-features.sh</code> script will take care of this for you, iterating through each project with a <code>*-wlpcfg</code> directory to make sure we have all of the referenced feautures for defined servers.</li></ol></div><p>You now have WDT installed and ready (per earlier steps), and a runtime installed that has all of the features our servers need. We now need to tell them about each other.</p><section class="doc-section level-2"><h3 id=_create_the_runtime_environment>Create the Runtime Environment</h3><div class="olist arabic"><ol class=arabic><li>Open the 'Runtime Explorer' view:<ul><li><strong>Window &#8594; Show View &#8594; Other</strong></li><li>type <code>runtime</code> in the filter box to find the view (it&#8217;s under the Server heading).</li></ul></li><li>Right-click in the view, and select <strong>New &#8594; Runtime Environment</strong></li><li>Give the Runtime environment a name, e.g. <code>wlp-2015.11.0.0</code> if you&#8217;re using the November 2015 beta.</li><li>Select the existing Liberty installation</li><li>Add project-specific user directories:<ol class=loweralpha type=a><li>Click the <code>Advanced Options&#8230;&#8203;</code> link</li><li>For each <code><strong>-wlpcfg</code> project (e.g. <code>player-wlpcfg</code>): Click *New</strong>, and select it</li><li>Click <strong>OK</strong> when all <code>*-wlpcfg</code> projects are shown in the list of user directories</li></ol></li><li>Click <strong>Finish</strong> to create the Runtime Environment. The Runtime Environment view should look something like <a href=#runtimeEnvironment>Figure 2</a>.</li></ol></div><figure class=image-block id=runtimeEnvironment><img src=/images/runtimeExplorer.png alt="Runtime Explorer for Liberty in WDT" width=600><figcaption>Figure 2. Example of the Runtime Explorer for Liberty in WDT with associated user directories</figcaption></figure></section><section class="doc-section level-2"><h3 id=_create_wdt_servers>Create WDT Servers</h3><p>WDT has its own representation of the server, which show up in the Servers view:
* <strong>Window &#8594; Show View &#8594; Other</strong>
* type <code>server</code> in the filter box to find the view (it&#8217;s under the Server heading).</p><div class="olist arabic"><ol class=arabic><li>In the Runtime Explorer view, <strong>Right-click</strong> on the newly created Runtime Environment, e.g. <code>wlp-2015.11.0.0</code>, and select <strong>New &#8594; Server</strong>.<ul><li>The resulting dialog should be pre-populated. The "Liberty profile server" drop-down box will contain an entry for every configured server for that runtime environment.</li></ul></li><li>For each <code>gameon-<strong></code> entry in the drop-down, select it, and click *Finish</strong> to create an Eclipse/WDT Server.</li></ol></div><figure class=image-block id=serversView><img src=/images/defaultServers.png alt="Liberty Servers in WDT" width=600><figcaption>Figure 3. The Servers view listing Liberty servers in WDT</figcaption></figure><figure class=image-block id=renamedServers><img src=/images/renamedServers.png alt="Renamed Liberty Servers in WDT" width=600><figcaption>Figure 4. Servers can be renamed for clarity (right click)</figcaption></figure></section><section class="doc-section level-2"><h3 id=_deploy_the_application_to_the_server>Deploy the application to the server</h3><p>WDT defines a very handy stand-in for the packaged war: a loose configuration file. We&#8217;re going to deploy our applications to the liberty servers, and WDT will replace our built wars with xml files that act like wars, but that serve the contents directly from our eclipse project.</p><p><strong>For each server</strong>:</p><div class="olist arabic"><ol class=arabic><li><strong>Right-click</strong> on the server in the Servers view, and select <strong>Add and Remove&#8230;&#8203;</strong></li><li>In the dialog that opens, you will see an application with the same name in both the left and right-hand side of the dialog. Select the application in the left-hand panel as shown in <a href=#img-appWarning>Figure 5</a>, and click <strong>Add ></strong> to add it to the application as shown in <a href=#img-appReplace>Figure 6</a>.</li><li>Click <strong>Finish</strong>.</li><li><strong>Right-click</strong> on the server again, and select <strong>Publish</strong>.<ul><li>You may see warnings that the publish failed. These can be ignored.</li></ul></li><li>Open the corresponding <code><strong>-wlpcfg</code> project. Verify that the <code>servers/gameon-</strong>/apps</code> folder now contains a <code>*-app.war.xml</code> file as shown in <a href=#img-looseConfig>Figure 7</a>.<ul><li>You may need to refresh the view to see the updated application</li><li>If the <code>*.war</code> file created by the <code>build.sh</code> step is still present, you may remove it to avoid problems later.</li></ul></li><li>Discard any <code>server.xml</code> changes made by WDT for the project.</li></ol></div><figure class=image-block id=img-appWarning><img src=/images/addApplicationWarning.png alt="Add and Remove... with a warning for the existing application" width=600><figcaption>Figure 5. A warning appears when selecting the application in the left pane</figcaption></figure><figure class=image-block id=img-appReplace><img src=/images/addApplication.png alt="Add and Remove... replacing the application" width=600><figcaption>Figure 6. Add the application to the server to replace the built war file</figcaption></figure><figure class=image-block id=img-looseConfig><img src=/images/looseConfig.png alt="The mediator's loose config file" width=300><figcaption>Figure 7. The loose config file in the mediator-wlpcfg project</figcaption></figure></section></section><section class="doc-section level-1"><h2 id=_all_done>All done!</h2><p>Congratulations!</p><div class=ulist><ul><li>The Docker Compose configuration mapped your local filesystem into the Docker container</li><li>You now have Eclipse projects that reference the same source and Liberty configuration</li><li>WDT has created a loose configuration file to replace the built/packaged war</li></ul></div><p>You can now make application updates within your Eclipse projects, and see the results running live in your local development server without having to build/package/redeploy/etc.</p></section></article><nav class=prev-next><div class=nav-left><div class=long><a href=/walkthroughs/deploy-room.html title="Previous: Deploy your room service">Deploy your room service</a></div><div class=short><a href=/walkthroughs/deploy-room.html title="Previous: Deploy your room service">Previous</a></div></div><div class=nav-center><div class=long>Up: <a href=/walkthroughs/>Extending the game</a></div><div class=short><a href=/walkthroughs/>Up</a></div></div><div class=nav-right><div class=long><a href=/walkthroughs/register-room.html title="Next: Register your Room">Register your Room</a></div><div class=short><a href=/walkthroughs/register-room.html title="Next: Register your Room">Next</a></div></div></nav></main><footer class=foot><div id=copyrights>&#169; 2016-2021 under terms of the Apache License 2.0.</div><div>Follow us:
<a target=_blank href=https://twitter.com/gameontext title="Follow @gameontext"><i class="fa fa-twitter" aria-hidden=true></i></a></div></footer><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-90113653-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>